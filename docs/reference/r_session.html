<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>External R Session — r_session • callr</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="External R Session — r_session" />

<meta property="og:description" content="A permanent R session that runs in the background. This is an R6 class
that extends the processx::process class." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">callr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Task-queue-with-callr.html">A multi process task queue in 100 lines of R code</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/callr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>External R Session</h1>
    <small class="dont-index">Source: <a href='https://github.com/r-lib/callr/blob/master/R/r-session.R'><code>R/r-session.R</code></a></small>
    <div class="hidden name"><code>r_session.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>A permanent R session that runs in the background. This is an R6 class
that extends the <a href='http://processx.r-lib.org/reference/process.html'>processx::process</a> class.</p>
    
    </div>

        
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The process is started at the creation of the object, and then it can
be used to evaluate R function calls, one at a time.</p>
    
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    <pre>rs &lt;- r_session$new(options = r_session_options(), wait = TRUE,
                     wait_timeout = 3000)
    rs$run(func, args = list())
rs$run_with_output(func, args = list())
rs$call(func, args = list())
    rs$poll_process(timeout)
    rs$get_state()
rs$get_running_time()
    rs$read()
rs$close(grace = 1000)
    rs$traceback()
</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>

    
    <ul>
<li><p><code>options</code>: A list of options created via <code><a href='r_session_options.html'>r_session_options()</a></code>.</p></li>
<li><p><code>wait</code>: Whether to wait for the R process to start and be ready
for running commands.</p></li>
<li><p><code>wait_timeout</code>: Timeout for waiting for the R process to start,
in milliseconds.</p></li>
<li><p><code>func</code>: Function object to call in the background R process.
Please read the notes for the similar argument of <code><a href='r.html'>r()</a></code></p></li>
<li><p><code>args</code>: Arguments to pass to the function. Must be a list.</p></li>
<li><p><code>timeout</code>: Timeout period in milliseconds.</p></li>
<li><p><code>grace</code>: Grace period in milliseconds, to wait for the subprocess to
exit cleanly, after its standard input is closed. If the process is
still running after this period, it will be killed.</p></li>
</ul>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
    <p><code>r_session$new()</code> creates a new R background process. It can wait for the
process to start up (<code>wait = TRUE</code>), or return immediately, i.e. before
the process is actually ready to run. In the latter case you may call
<code>rs$poll_process()</code> to make sure it is ready.</p>
<p><code>rs$run()</code> is similar to <code><a href='r.html'>r()</a></code>, but runs the function in the <code>rs</code> R
session. It throws an error if the function call generated an error in
the child process.</p>
<p><code>rs$run_with_output()</code> is similar to <code>$run()</code>, but returns the standard
output and error of the child process as well. It does not throw on
errors, but returns a non-zero <code>error</code> member in the result list.</p>
<p><code>rs$call()</code> starts running a function in the background R session, and
returns immediately. To check if the function is done, call the
<code>poll_process()</code> method.</p>
<p><code>rs$poll_process()</code> polls the R session with a timeout. If the session
has finished the computation, it returns with <code>"ready"</code>. If the timeout
is reached, it returns with <code>"timeout"</code>.</p>
<p><code>rs$get_state()</code> return the state of the R session. Possible values:</p><ul>
<li><p><code>"starting"</code>: starting up,</p></li>
<li><p><code>"idle"</code>: ready to compute,</p></li>
<li><p><code>"busy"</code>: computing right now,</p></li>
<li><p><code>"finished"</code>: the R process has finished.</p></li>
</ul>
    <p><code>rs$get_running_time()</code> returns the elapsed time since the R process
has started, and the elapsed time since the current computation has
started. The latter is NA if there is no active computation.</p>
<p><code>rs$read()</code> reads an event from the child process, if there is one
available. Events might signal that the function call has finished,
or they can be progress report events.</p>
<p><code>rs$close()</code> terminates the current computation and the R process.
The session object will be in <code>"finished"</code> state after this.</p>
<p>`rs$traceback() can be used after an error in the R subprocess. It is
equivalent to the <code><a href='https://www.rdocumentation.org/packages/base/topics/traceback'>traceback()</a></code> call, but it is performed in the
subprocess.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='no'>rs</span> <span class='kw'>&lt;-</span> <span class='no'>r_ression</span>$<span class='fu'>new</span>()

<span class='no'>rs</span>$<span class='fu'><a href='http://processx.r-lib.org/reference/run.html'>run</a></span>(<span class='kw'>function</span>() <span class='fl'>1</span> + <span class='fl'>2</span>)

<span class='no'>rs</span>$<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/call'>call</a></span>(<span class='kw'>function</span>() <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Sys.sleep'>Sys.sleep</a></span>(<span class='fl'>1</span>))
<span class='no'>rs</span>$<span class='fu'>get_state</span>()

<span class='no'>rs</span>$<span class='fu'>poll_process</span>(-<span class='fl'>1</span>)
<span class='no'>rs</span>$<span class='fu'>get_state</span>()
<span class='no'>rs</span>$<span class='fu'>read</span>()
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      
      <li><a href="#details">Details</a></li>

      <li><a href="#usage">Usage</a></li>

      <li><a href="#arguments">Arguments</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/gaborcsardi'>Gábor Csárdi</a>, <a href='https://github.com/wch'>Winston Chang</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>, Mango Solutions.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

